# 使用指南

## 安装插件

### 方法一：开发者模式安装（推荐用于测试）

1. 打开 utools
2. 按下 `Ctrl + I` (Windows/Linux) 或 `Cmd + I` (macOS) 打开插件管理
3. 点击右上角的"开发者工具"按钮
4. 选择"导入开发插件"
5. 选择本项目的根目录
6. 安装完成后，在 utools 中输入 `AI` 或 `通义` 即可启动

### 方法二：打包安装

1. 将整个项目文件夹压缩为 `.upx` 格式（实际上就是 zip 格式，改后缀名即可）
2. 在 utools 插件市场中选择"从本地安装"
3. 选择打包好的 `.upx` 文件

## 首次配置

1. 启动插件后，如果未配置会提示您配置 API Key
2. 或者手动输入 `AI设置` 打开设置页面
3. 在设置页面中：
   - 输入您的阿里云 DashScope API Key
   - 选择要使用的模型（推荐 qwen-plus-latest 支持联网搜索）
   - 启用"网络搜索"选项（如果模型支持）
   - 点击"验证 API Key"按钮测试是否配置成功
   - 点击"保存设置"

### 获取 API Key

1. 访问阿里云 DashScope 控制台：https://dashscope.console.aliyun.com/
2. 注册/登录阿里云账号
3. 进入 API Key 管理页面：https://dashscope.console.aliyun.com/apiKey
4. 创建新的 API Key 或使用现有的
5. 复制 API Key 到插件设置中

**注意**: 
- 新用户通常有免费额度可以使用
- API 调用会产生费用，请注意控制使用量
- 不要泄露您的 API Key

## 基本使用

### 发送消息

1. 在 utools 中输入 `AI`、`通义`、`对话` 等关键词启动插件
2. 在输入框中输入您的问题
3. 按 `Enter` 或点击发送按钮发送消息
4. AI 会以流式方式实时返回回复

### 快捷键

- `Ctrl/Cmd + Enter`: 发送消息
- `Ctrl/Cmd + N`: 创建新对话
- `Ctrl/Cmd + K`: 清空当前对话
- `Esc`: 隐藏插件窗口

### 网络搜索功能

当您选择支持联网搜索的模型（如 qwen-plus-latest、qwen-max-latest）并启用"网络搜索"选项后：

1. 询问实时信息，如"今天的新闻"、"某股票最新价格"等
2. AI 会自动搜索网络获取最新信息
3. 回复中会包含搜索到的实时数据

示例问题：
- "今天有什么重要新闻？"
- "特斯拉股票最新价格是多少？"
- "2024年奥运会在哪里举办？"

### 多轮对话

- 插件支持上下文对话，AI 会记住之前的对话内容
- 可以连续提问，进行深入讨论
- 每个对话会话独立保存，可以创建多个对话

### 对话管理

- **新建对话**: 点击左上角 ➕ 按钮或按 `Ctrl/Cmd + N`
- **切换对话**: 点击左侧历史列表中的对话
- **清空对话**: 点击右上角 🗑️ 按钮或按 `Ctrl/Cmd + K`
- **删除对话**: 鼠标悬停在历史列表的对话上，点击 🗑️ 按钮

## 高级功能

### 自定义系统提示词

在设置中可以自定义系统提示词，定义 AI 的角色和行为：

示例：
- "你是一个专业的 Python 程序员，擅长代码优化和调试"
- "你是一个中英文翻译专家，能够准确翻译并解释文化差异"
- "你是一个创意写作助手，能够帮助用户进行文学创作"

### 调整模型参数

**温度 (Temperature)**: 0-2
- 值越低，回复越确定、保守
- 值越高，回复越随机、创造性
- 推荐: 0.7 (平衡)

**最大 Token 数**: 100-8000
- 控制单次回复的最大长度
- 推荐: 2000 (一般对话)
- 长文本生成可以设置更高

### 数据管理

**导出对话历史**:
- 在设置页面点击"导出对话历史"
- 会下载一个 JSON 文件包含所有对话记录

**导入对话历史**:
- 在设置页面点击"导入对话历史"
- 选择之前导出的 JSON 文件

**清空所有数据**:
- 在设置页面点击"清空所有数据"
- 会删除所有对话历史和配置（谨慎使用！）

### 主题切换

- 点击左下角的 🌙/☀️ 按钮切换深色/浅色主题
- 或在设置中选择"跟随系统"自动切换

## 支持的模型对比

| 模型 | 速度 | 性能 | 联网搜索 | 推荐场景 |
|------|------|------|----------|----------|
| qwen-turbo | ⭐⭐⭐ | ⭐⭐ | ❌ | 简单问答、日常对话 |
| qwen-plus | ⭐⭐ | ⭐⭐⭐ | ❌ | 通用场景、推荐 |
| qwen-max | ⭐ | ⭐⭐⭐⭐⭐ | ❌ | 复杂任务、专业分析 |
| qwen-long | ⭐ | ⭐⭐⭐ | ❌ | 超长文本、文档分析 |
| qwen-turbo-latest | ⭐⭐⭐ | ⭐⭐⭐ | ✅ | 实时信息、快速问答 |
| qwen-plus-latest | ⭐⭐ | ⭐⭐⭐⭐ | ✅ | 联网搜索、推荐 |
| qwen-max-latest | ⭐ | ⭐⭐⭐⭐⭐ | ✅ | 复杂任务 + 联网 |

## 常见问题

### Q: 提示"API Key 未配置"？
A: 请先在设置中配置您的阿里云 DashScope API Key。

### Q: API 调用失败？
A: 
1. 检查 API Key 是否正确
2. 检查网络连接是否正常
3. 检查账号余额是否充足
4. 尝试切换不同的模型

### Q: 网络搜索不生效？
A: 
1. 确保选择的是支持联网的模型（模型名带 -latest 后缀）
2. 确保在设置中启用了"网络搜索"选项
3. 提问时明确表达需要实时信息

### Q: 如何提高回复质量？
A: 
1. 提供清晰、详细的问题描述
2. 使用更强大的模型（qwen-max-latest）
3. 调整系统提示词，定义专业角色
4. 适当降低温度参数（更准确）

### Q: 插件占用太多存储空间？
A: 可以定期导出并删除旧的对话历史。

### Q: 可以离线使用吗？
A: 不可以，插件需要联网调用阿里云 API。

## 技巧与建议

1. **善用系统提示词**: 根据不同场景设置不同的角色
2. **创建多个对话**: 为不同主题创建独立对话，便于管理
3. **利用联网搜索**: 询问实时信息时选择 -latest 模型
4. **定期备份**: 导出重要的对话历史
5. **合理控制 Token**: 避免不必要的长回复浪费额度

## 反馈与支持

如有问题或建议，欢迎通过以下方式反馈：
- GitHub Issues
- 邮件联系

祝您使用愉快！🎉

